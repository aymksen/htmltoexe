<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HTML to Server Launcher</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel">
        const { useState } = React;

        function App() {
            const [htmlFile, setHtmlFile] = useState(null);
            const [fileName, setFileName] = useState('');
            const [status, setStatus] = useState('');

            const handleFileUpload = (event) => {
                const file = event.target.files[0];
                if (file && file.name.endsWith('.html')) {
                    setHtmlFile(file);
                    setFileName(file.name.replace('.html', ''));
                    setStatus('File loaded successfully!');
                } else {
                    setStatus('Please upload a valid HTML file');
                    setHtmlFile(null);
                }
            };

            const generateLauncher = async () => {
                if (!htmlFile) {
                    setStatus('Please upload an HTML file first');
                    return;
                }

                const reader = new FileReader();
                reader.onload = async (e) => {
                    const htmlContent = e.target.result;
                    
                    // Create Python launcher script
                    const pythonContent = `#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
${fileName} Launcher
Auto-generated HTML launcher with embedded web server
"""

import http.server
import socketserver
import webbrowser
import sys
from threading import Timer

# Port to run the server on
PORT = 8000

# Embedded HTML content
HTML_CONTENT = """${htmlContent.replace(/\\/g, '\\\\').replace(/"/g, '\\"').replace(/\n/g, '\\n')}"""

class CustomHandler(http.server.SimpleHTTPRequestHandler):
    def do_GET(self):
        self.send_response(200)
        self.send_header('Content-type', 'text/html')
        self.end_headers()
        self.wfile.write(HTML_CONTENT.encode('utf-8'))
    
    def log_message(self, format, *args):
        # Suppress log messages for cleaner output
        pass

def open_browser():
    """Open the default web browser after a short delay"""
    webbrowser.open(f'http://localhost:{PORT}')

def main():
    try:
        # Try to start server on PORT
        with socketserver.TCPServer(("", PORT), CustomHandler) as httpd:
            print(f"========================================")
            print(f"  ${fileName} Server")
            print(f"========================================")
            print(f"Server running at http://localhost:{PORT}")
            print(f"Press Ctrl+C to stop the server")
            print(f"========================================\\n")
            
            # Open browser after 1 second
            Timer(1.0, open_browser).start()
            
            # Start serving
            httpd.serve_forever()
    except KeyboardInterrupt:
        print("\\n\\nServer stopped.")
        sys.exit(0)
    except OSError as e:
        if e.errno == 98 or e.errno == 10048:  # Address already in use
            print(f"Error: Port {PORT} is already in use.")
            print(f"Please close any other programs using this port and try again.")
        else:
            print(f"Error: {e}")
        input("\\nPress Enter to exit...")
        sys.exit(1)

if __name__ == "__main__":
    main()
`;

                    // Create and download the Python file
                    const blob = new Blob([pythonContent], { type: 'text/plain' });
                    const url = URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = `${fileName}_launcher.py`;
                    document.body.appendChild(a);
                    a.click();
                    document.body.removeChild(a);
                    URL.revokeObjectURL(url);

                    setStatus('Python launcher generated! See instructions below to convert to .exe');
                };
                reader.readAsText(htmlFile);
            };

            return (
                <div className="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 py-12 px-4">
                    <div className="max-w-4xl mx-auto">
                        <div className="bg-white rounded-lg shadow-xl p-8">
                            <h1 className="text-4xl font-bold text-gray-800 mb-2 text-center">
                                HTML to Server Launcher
                            </h1>
                            <p className="text-gray-600 text-center mb-8">
                                Convert your HTML file into a standalone launcher
                            </p>

                            <div className="mb-8">
                                <label className="block text-sm font-medium text-gray-700 mb-2">
                                    Upload HTML File
                                </label>
                                <input
                                    type="file"
                                    accept=".html"
                                    onChange={handleFileUpload}
                                    className="block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100 cursor-pointer"
                                />
                            </div>

                            {status && (
                                <div className={`mb-6 p-4 rounded-lg ${status.includes('success') ? 'bg-green-50 text-green-800' : 'bg-blue-50 text-blue-800'}`}>
                                    {status}
                                </div>
                            )}

                            <div className="mb-8">
                                <button
                                    onClick={generateLauncher}
                                    disabled={!htmlFile}
                                    className="w-full bg-indigo-600 text-white py-3 px-6 rounded-lg font-semibold hover:bg-indigo-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition duration-200 text-lg"
                                >
                                    ðŸš€ Generate Launcher
                                </button>
                            </div>

                            <div className="bg-gray-50 rounded-lg p-6 space-y-4">
                                <h2 className="text-xl font-semibold text-gray-800">ðŸ“‹ How to Use:</h2>
                                
                                <div className="space-y-4">
                                    <div className="bg-white border-2 border-indigo-500 rounded-lg p-4">
                                        <h3 className="font-bold text-gray-800 text-lg mb-3">Step 1: Generate Launcher</h3>
                                        <ol className="list-decimal list-inside text-gray-700 space-y-2 ml-2">
                                            <li>Upload your HTML file above</li>
                                            <li>Click the "Generate Launcher" button</li>
                                            <li>A <code className="bg-gray-200 px-2 py-1 rounded">.py</code> file will download</li>
                                        </ol>
                                    </div>

                                    <div className="bg-white border-2 border-green-500 rounded-lg p-4">
                                        <h3 className="font-bold text-gray-800 text-lg mb-3">Step 2: Convert to .EXE (One-Click Launch)</h3>
                                        <div className="space-y-3">
                                            <div className="bg-blue-50 border border-blue-200 rounded p-3">
                                                <p className="font-semibold text-blue-900 mb-2">ðŸ”¹ Option A: PyInstaller (Recommended)</p>
                                                <ol className="list-decimal list-inside text-sm text-gray-700 space-y-1 ml-2">
                                                    <li>Install Python from <a href="https://www.python.org/downloads/" target="_blank" className="text-indigo-600 hover:underline font-medium">python.org</a></li>
                                                    <li>Open Command Prompt and run: <code className="bg-white px-2 py-1 rounded border text-xs block mt-1">pip install pyinstaller</code></li>
                                                    <li>Navigate to your launcher file's folder</li>
                                                    <li>Run: <code className="bg-white px-2 py-1 rounded border text-xs block mt-1">pyinstaller --onefile --noconsole yourfile_launcher.py</code></li>
                                                    <li>Find your .exe in the <code className="bg-gray-200 px-1 rounded">dist</code> folder!</li>
                                                </ol>
                                            </div>

                                            <div className="bg-purple-50 border border-purple-200 rounded p-3">
                                                <p className="font-semibold text-purple-900 mb-2">ðŸ”¹ Option B: Auto PY to EXE (GUI Tool - Easiest!)</p>
                                                <ol className="list-decimal list-inside text-sm text-gray-700 space-y-1 ml-2">
                                                    <li>Install: <code className="bg-white px-2 py-1 rounded border text-xs">pip install auto-py-to-exe</code></li>
                                                    <li>Run: <code className="bg-white px-2 py-1 rounded border text-xs">auto-py-to-exe</code></li>
                                                    <li>Select your .py file in the GUI</li>
                                                    <li>Choose "One File" and "Window Based"</li>
                                                    <li>Click "Convert" - done!</li>
                                                </ol>
                                            </div>
                                        </div>
                                    </div>

                                    <div className="bg-gradient-to-r from-green-50 to-blue-50 border-2 border-green-400 rounded-lg p-4">
                                        <h3 className="font-bold text-gray-800 mb-2">âœ… Result</h3>
                                        <p className="text-gray-700">
                                            You'll have a single <strong>.exe file</strong> that you can double-click to launch your HTML app with a built-in web server. 
                                            No Python needed on other computers!
                                        </p>
                                    </div>
                                </div>

                                <div className="bg-yellow-50 border border-yellow-300 rounded p-4 mt-4">
                                    <p className="text-sm text-yellow-900">
                                        <strong>ðŸ’¡ Note:</strong> The generated .py file already includes your entire HTML app inside it. 
                                        You only need to convert the .py file to .exe once, then you can share just the .exe file!
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        }

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
